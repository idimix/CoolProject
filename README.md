# Учебный проект курса MLOps

## Описание проекта

В процессе развития проекта описание будет актуализироваться



## Структура репозитория

- **app** - папка с исполняемым файлом проекта **app.py**
- **data** - папка для хранения данных, используемых в проекте. Включает входные данные, обучающие и тестовые наборы данных, а также предобработанные или промежуточные данные
- **models** папка с сохраненными моделями или их параметры

- **notebooks** - папка с блокнотами в формате jupyter notebook с экспериментами, прототипами модели и т.д.

- **src** - папка с исходном кодом проекта
- **experiments** - папка с результатами экспериментов
- **config** - папка с файлами конфигураций
- **tests** - папка с тестами
- **readme.md** - правила ведения репозитория и описание проекта
- **requirements.in** - используемые библиотеки (добавляются вручную), если используется `pip-tools`
- **requirements.txt** - версии каждой библиотеки проекта, включая пакеты, добавленные вручную (и их зависимости). Генерируется командой `pip-compile` на основе файла **requirements.in**
- **contributing.md**  - инструкция по использованию линтеров в проекте
- **pyproject.toml**  - настройки линтеров и форматеров



## Правила ведения репозитория

В процессе работы над проектом будут создаваться модели, проверяться гипотезы и т.д., деплой.

Каждый крупный эксперимент нужно вести в отдельной ветке, название произвольное. Допускается вести несколько небольших экспериментов в одной ветке.

Финальная модель включая сопутствующую кодовую базу, переносится в ветку **develop**. Эта ветка содержит самые последние изменения. После проверки изменения уходят в ветку **main**.

Для переноса кода из ветки эксперимента в ветку **develop** у каждого должна быть своя промежуточная ветка.

**Общий алгоритм следующий:**

1. проводим эксперимент в соответствующей ветке эксперимента
2. забираем самый актуальный код из ветки **develop** в свою промежуточную ветку `git pull`
3. вносим изменения из ветки эксперимента в промежуточную ветку
4. в промежуточной ветке описываем результаты эксперимента в папке **experiments** в общих файлах
5. делаем `merge request` из промежуточной ветки в ветку **develop**
6. делаем `merge request` из ветки **develop** в ветку **main**



# Запуск docker контейнера

Сборка контейнера с **prod** окружением

```bash
docker build -t coolproject:prod --build-arg ENVIROMENT=prod -f Dockerfile .
```

Сборка контейнера **dev** окружением

```bash
docker build -t coolproject:dev --build-arg ENVIROMENT=dev -f Dockerfile .
```

Запуск контейнера

``` bash
docker run --rm --name coolproject_prod coolproject:prod
```

Запуск контейнера для отладки

```bash
docker run -it --rm --name coolproject_prod coolproject:prod bash
```



